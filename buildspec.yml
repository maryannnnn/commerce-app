version: 0.2

env:
  variables:
    MONGODB_URL: "mongodb+srv://marian:marian737marian@cluster0.jmsg0.mongodb.net/myFirstDatabase?retryWrites=true&w=majority"
    PORT: "5000"
    JWT_SECRET: "somethingsecret"

phases:
  install:
    runtime-versions:
      nodejs: 18
    commands:
      - npm ci --legacy-peer-deps
      - cd frontend && npm install --legacy-peer-deps
      - cd ../backend && npm install --legacy-peer-deps
      - echo "üì¶ installing Front-end Back-end packages..."
      - echo "‚úÖ Packages Front-end Back-end installed successfully."
  build:
    commands:
      - cd ../frontend && npm run build || true
      - cd ../backend && npm run build || true
      - echo "‚öôÔ∏è Testing..."
      - echo "‚úÖ Tests passed successfully."
      - echo "üöß Starting Front-end compiling packages..."
      - echo "‚úÖ Build Front-end passed successfully."
artifacts:
  files:
    - frontend/build/**/* # –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
    - backend/server.js    # –§–∞–π–ª —Å–µ—Ä–≤–µ—Ä–∞ –∏–∑ –±—ç–∫–µ–Ω–¥–∞
